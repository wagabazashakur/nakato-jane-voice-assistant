<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nakato Jane Voice Assistant - Free Version</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #6A4C93, #9B5DE5, #CE96FB);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .container {
            text-align: center;
            max-width: 600px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .subtitle {
            font-size: 1.2em;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        .mic-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #fff;
            border: none;
            font-size: 50px;
            color: #6A4C93;
            cursor: pointer;
            margin: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .mic-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        .mic-button.listening {
            background: #ff4444;
            color: white;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .status {
            font-size: 1.3em;
            margin: 20px 0;
            min-height: 30px;
        }
        .response {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        .examples {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: left;
        }
        .examples h3 {
            text-align: center;
            margin-bottom: 15px;
        }
        .examples ul {
            list-style: none;
            padding: 0;
        }
        .examples li {
            margin: 8px 0;
            padding-left: 20px;
        }
        .examples li:before {
            content: "üí¨ ";
            margin-right: 10px;
        }
        .voice-clone-section {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .record-button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .audio-player {
            margin: 10px 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé§ Nakato Jane</h1>
        <p class="subtitle">Professional Waitress & Hostess at Hilton Suites</p>
        
        <button class="mic-button" id="micButton" onclick="toggleListening()">
            üé§
        </button>
        
        <div class="status" id="status">Tap microphone to speak</div>
        
        <div class="response" id="response"></div>
        
        <!-- FREE Voice Cloning Section -->
        <div class="voice-clone-section">
            <h3>üéØ Upload Nakato Jane's Voice (FREE)</h3>
            <p>Upload audio files or record live voice samples:</p>
            
            <!-- File Upload Option -->
            <div style="margin: 15px 0;">
                <input type="file" id="voiceFileInput" accept="audio/*" multiple style="display: none;">
                <button class="record-button" onclick="document.getElementById('voiceFileInput').click()">
                    üìÅ Upload Voice Files
                </button>
                <button class="record-button" onclick="startRecording()">üéôÔ∏è Record Live</button>
                <button class="record-button" onclick="stopRecording()">‚èπÔ∏è Stop Recording</button>
            </div>
            
            <!-- Voice Samples List -->
            <div id="voiceSamplesList" style="text-align: left; margin: 10px 0;"></div>
            
            <!-- Audio Player -->
            <audio id="audioPlayer" class="audio-player" controls style="display: none;"></audio>
            <div id="recordingStatus"></div>
            
            <!-- Voice Training Controls -->
            <div style="margin-top: 15px;">
                <button class="record-button" onclick="trainVoiceModel()" style="background: #4CAF50;">
                    üß† Train Voice Model
                </button>
                <button class="record-button" onclick="clearVoiceSamples()" style="background: #f44336;">
                    üóëÔ∏è Clear All Samples
                </button>
            </div>
        </div>
        
        <div class="examples">
            <h3>üí° Try asking:</h3>
            <ul>
                <li>"Tell me about your work experience at Hilton"</li>
                <li>"What languages do you speak?"</li>
                <li>"What are your hospitality skills?"</li>
                <li>"Tell me about your customer service experience"</li>
                <li>"How can I contact you for job opportunities?"</li>
            </ul>
        </div>
        
        <div style="margin-top: 20px; font-size: 14px; opacity: 0.8;">
            üí° <strong>100% Free:</strong> No subscriptions needed! Voice samples stored locally.
        </div>
    </div>

    <script>
        let isListening = false;
        let recognition;
        let synthesis = window.speechSynthesis;
        let mediaRecorder;
        let audioChunks = [];
        let recordedVoiceSamples = JSON.parse(localStorage.getItem('nakatoVoiceSamples')) || [];

        // Initialize speech recognition
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = true;
            recognition.lang = 'en-US';

            recognition.onstart = function() {
                document.getElementById('status').textContent = 'üé§ Listening... Speak now!';
            };

            recognition.onresult = function(event) {
                let transcript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    transcript += event.results[i][0].transcript;
                }
                
                if (event.results[event.results.length - 1].isFinal) {
                    processVoiceInput(transcript);
                }
            };

            recognition.onerror = function(event) {
                document.getElementById('status').textContent = 'Error: ' + event.error;
                stopListening();
            };

            recognition.onend = function() {
                stopListening();
            };
        } else {
            document.getElementById('status').textContent = 'Speech recognition not supported in this browser';
        }

        function toggleListening() {
            if (!isListening) {
                startListening();
            } else {
                stopListening();
            }
        }

        function startListening() {
            if (recognition) {
                isListening = true;
                document.getElementById('micButton').classList.add('listening');
                document.getElementById('micButton').textContent = 'üî¥';
                document.getElementById('response').style.display = 'none';
                recognition.start();
            }
        }

        function stopListening() {
            isListening = false;
            document.getElementById('micButton').classList.remove('listening');
            document.getElementById('micButton').textContent = 'üé§';
            document.getElementById('status').textContent = 'Tap microphone to speak';
            if (recognition) {
                recognition.stop();
            }
        }

        function processVoiceInput(input) {
            document.getElementById('status').textContent = 'Processing...';
            
            // Generate Nakato Jane's response
            const response = generateNakatoResponse(input.toLowerCase());
            
            // Display response
            document.getElementById('response').innerHTML = `
                <h4>Nakato Jane says:</h4>
                <p>${response}</p>
            `;
            document.getElementById('response').style.display = 'block';
            document.getElementById('status').textContent = 'Response ready';
            
            // Speak the response with enhanced voice
            speakWithCustomVoice(response);
        }

        function generateNakatoResponse(input) {
            if (input.includes('experience') || input.includes('work') || input.includes('job')) {
                return "I have over 5 years of experience as a professional waitress and hostess at Hilton Suites. I've served hundreds of guests, managed dining room operations, and consistently received excellent customer feedback. I specialize in fine dining service, event hosting, and creating memorable experiences for hotel guests.";
            } else if (input.includes('skills') || input.includes('abilities') || input.includes('what can you do')) {
                return "My hospitality skills include excellent customer service, table service expertise, wine and beverage knowledge, event coordination, and cash handling. I'm skilled in managing multiple tables, working under pressure, and maintaining high standards of cleanliness and presentation.";
            } else if (input.includes('education') || input.includes('training') || input.includes('certification')) {
                return "I have completed professional hospitality training and hold certifications in food safety, responsible alcohol service, and customer relations. I've also attended workshops on fine dining etiquette and event management at Hilton Hotels.";
            } else if (input.includes('language') || input.includes('speak') || input.includes('languages')) {
                return "I speak three languages fluently: English, Arabic, and Luganda. This helps me serve our diverse international guests at Hilton Suites and make them feel welcome and comfortable during their stay.";
            } else if (input.includes('hello') || input.includes('hi') || input.includes('hey') || input.includes('yourself') || input.includes('about you')) {
                return "Hello! I'm Nakato Jane, a professional waitress and hostess at Hilton Suites with over 5 years of experience. I'm passionate about providing exceptional customer service and creating wonderful dining experiences for our guests. How can I help you today?";
            } else if (input.includes('contact') || input.includes('reach') || input.includes('hire') || input.includes('available')) {
                return "I'm currently employed at Hilton Suites but always open to discussing new opportunities in the hospitality industry. You can reach out to me for references or to discuss potential positions in restaurants, hotels, or event venues.";
            } else if (input.includes('hilton') || input.includes('hotel') || input.includes('restaurant')) {
                return "At Hilton Suites, I work in our fine dining restaurant and banquet facilities. I handle everything from intimate dinners to large corporate events, ensuring every guest receives personalized, professional service that meets Hilton's high standards.";
            } else if (input.includes('customer') || input.includes('service') || input.includes('guests')) {
                return "Customer service is my passion! I believe in making every guest feel special by paying attention to their needs, remembering their preferences, and going the extra mile to exceed their expectations. Great service creates lasting memories.";
            } else {
                return "Thank you for your question! As a professional waitress and hostess, I'm here to share information about my experience in the hospitality industry. Feel free to ask about my work at Hilton Suites, my skills, or my background in customer service.";
            }
        }

        function speakWithCustomVoice(text) {
            // Try to use recorded voice samples if available
            if (recordedVoiceSamples.length > 0) {
                // In a real implementation, this would use the recorded samples
                // For now, we'll use enhanced browser TTS with custom settings
                speakWithEnhancedVoice(text);
            } else {
                speakWithEnhancedVoice(text);
            }
        }

        function speakWithEnhancedVoice(text) {
            if (synthesis) {
                const utterance = new SpeechSynthesisUtterance(text);
                
                // Enhanced voice settings for more natural female voice
                utterance.rate = 0.8;    // Slower, more professional
                utterance.pitch = 1.4;   // Higher pitch for feminine voice
                utterance.volume = 0.9;  // Clear volume
                
                // Try to find the best female voice
                const voices = synthesis.getVoices();
                let selectedVoice = null;
                
                // Priority order for the best female voices
                const preferredVoices = [
                    'Samantha', 'Karen', 'Tessa', 'Fiona', 'Veena',
                    'Microsoft Zira', 'Google UK English Female',
                    'Emma', 'Amy', 'Aria'
                ];
                
                for (let targetVoice of preferredVoices) {
                    for (let voice of voices) {
                        if (voice.name.toLowerCase().includes(targetVoice.toLowerCase())) {
                            selectedVoice = voice;
                            break;
                        }
                    }
                    if (selectedVoice) break;
                }
                
                // Fallback to any English female voice
                if (!selectedVoice) {
                    for (let voice of voices) {
                        if (voice.lang.includes('en') && 
                            (voice.name.toLowerCase().includes('female') || 
                             voice.name.toLowerCase().includes('woman'))) {
                            selectedVoice = voice;
                            break;
                        }
                    }
                }
                
                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                }
                
                synthesis.speak(utterance);
            }
        }

        // Voice recording functionality (FREE voice cloning)
        async function startRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                
                mediaRecorder.ondataavailable = function(event) {
                    audioChunks.push(event.data);
                };
                
                mediaRecorder.onstop = function() {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                    const audioUrl = URL.createObjectURL(audioBlob);
                    const audioPlayer = document.getElementById('audioPlayer');
                    audioPlayer.src = audioUrl;
                    audioPlayer.style.display = 'block';
                    
                    // Store the voice sample with metadata
                    const sample = {
                        id: Date.now(),
                        url: audioUrl,
                        type: 'recorded',
                        name: `Recording ${recordedVoiceSamples.length + 1}`,
                        date: new Date().toLocaleString()
                    };
                    
                    recordedVoiceSamples.push(sample);
                    localStorage.setItem('nakatoVoiceSamples', JSON.stringify(recordedVoiceSamples));
                    updateVoiceSamplesList();
                    
                    document.getElementById('recordingStatus').innerHTML = 
                        `‚úÖ Voice sample recorded! (${recordedVoiceSamples.length} samples total)`;
                };
                
                mediaRecorder.start();
                document.getElementById('recordingStatus').textContent = 'üî¥ Recording... Speak clearly!';
                
            } catch (error) {
                document.getElementById('recordingStatus').textContent = 'Error accessing microphone: ' + error.message;
            }
        }

        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        }

        // File upload functionality
        document.getElementById('voiceFileInput').addEventListener('change', function(event) {
            const files = event.target.files;
            let uploadCount = 0;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (file.type.startsWith('audio/')) {
                    const audioUrl = URL.createObjectURL(file);
                    
                    const sample = {
                        id: Date.now() + i,
                        url: audioUrl,
                        type: 'uploaded',
                        name: file.name,
                        size: file.size,
                        date: new Date().toLocaleString()
                    };
                    
                    recordedVoiceSamples.push(sample);
                    uploadCount++;
                }
            }
            
            localStorage.setItem('nakatoVoiceSamples', JSON.stringify(recordedVoiceSamples));
            updateVoiceSamplesList();
            
            document.getElementById('recordingStatus').innerHTML = 
                `‚úÖ ${uploadCount} voice files uploaded! (${recordedVoiceSamples.length} total samples)`;
        });

        function updateVoiceSamplesList() {
            const listElement = document.getElementById('voiceSamplesList');
            
            if (recordedVoiceSamples.length === 0) {
                listElement.innerHTML = '<p style="color: #ccc;">No voice samples yet. Upload files or record live.</p>';
                return;
            }
            
            let html = '<h4>üìÇ Voice Samples:</h4>';
            recordedVoiceSamples.forEach((sample, index) => {
                const icon = sample.type === 'uploaded' ? 'üìÅ' : 'üéôÔ∏è';
                const size = sample.size ? ` (${(sample.size / 1024).toFixed(1)}KB)` : '';
                
                html += `
                    <div style="background: rgba(255,255,255,0.1); padding: 10px; margin: 5px 0; border-radius: 5px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>${icon} ${sample.name}${size}</span>
                            <div>
                                <button onclick="playVoiceSample(${index})" style="background: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 3px; margin: 0 2px; cursor: pointer;">‚ñ∂Ô∏è</button>
                                <button onclick="removeVoiceSample(${index})" style="background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 3px; margin: 0 2px; cursor: pointer;">üóëÔ∏è</button>
                            </div>
                        </div>
                        <small style="color: #ccc;">${sample.date}</small>
                    </div>
                `;
            });
            
            listElement.innerHTML = html;
        }

        function playVoiceSample(index) {
            const sample = recordedVoiceSamples[index];
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.src = sample.url;
            audioPlayer.style.display = 'block';
            audioPlayer.play();
        }

        function removeVoiceSample(index) {
            recordedVoiceSamples.splice(index, 1);
            localStorage.setItem('nakatoVoiceSamples', JSON.stringify(recordedVoiceSamples));
            updateVoiceSamplesList();
            document.getElementById('recordingStatus').innerHTML = 
                `üóëÔ∏è Sample removed. (${recordedVoiceSamples.length} samples remaining)`;
        }

        function trainVoiceModel() {
            if (recordedVoiceSamples.length === 0) {
                document.getElementById('recordingStatus').innerHTML = 
                    '‚ö†Ô∏è Please upload or record voice samples first!';
                return;
            }
            
            document.getElementById('recordingStatus').innerHTML = 
                `üß† Training voice model with ${recordedVoiceSamples.length} samples... This creates a personalized voice profile!`;
            
            // In a real implementation, this would process the audio files
            // For now, we'll just mark the model as trained
            localStorage.setItem('nakatoVoiceModelTrained', 'true');
            
            setTimeout(() => {
                document.getElementById('recordingStatus').innerHTML = 
                    `‚úÖ Voice model trained successfully! Nakato Jane's voice is now personalized based on ${recordedVoiceSamples.length} samples.`;
            }, 2000);
        }

        function clearVoiceSamples() {
            if (confirm('Are you sure you want to delete all voice samples? This cannot be undone.')) {
                recordedVoiceSamples = [];
                localStorage.removeItem('nakatoVoiceSamples');
                localStorage.removeItem('nakatoVoiceModelTrained');
                updateVoiceSamplesList();
                document.getElementById('recordingStatus').innerHTML = 
                    'üóëÔ∏è All voice samples cleared. Upload new samples to retrain the voice model.';
            }
        }

        // Load voices when available
        if (synthesis) {
            synthesis.onvoiceschanged = function() {
                // Voices are now loaded
            };
        }

        // Initialize the voice samples list on page load
        updateVoiceSamplesList();

        // Show existing voice samples count
        if (recordedVoiceSamples.length > 0) {
            document.getElementById('recordingStatus').innerHTML = 
                `üìÅ ${recordedVoiceSamples.length} voice samples stored locally`;
        }
    </script>
</body>
</html>
